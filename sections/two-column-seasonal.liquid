{% schema %}
{
  "name": "Two Column Seasonal",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Choose your seasonal color"
    },
    {
      "type": "textarea",
      "id": "section_description",
      "label": "Section Description",
      "default": "Backed by expertise from top color analysis studios and the minds behind"
    },
    {
      "type": "color",
      "id": "left_bg",
      "label": "Left Column Background Color",
      "default": "#f5f5f5"
    },
    {
      "type": "color",
      "id": "right_bg",
      "label": "Right Column Background Color",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "swatch_tab",
      "name": "Swatch Tab",
      "settings": [
        {
          "type": "text",
          "id": "swatch_name",
          "label": "Swatch Name"
        },
        {
          "type": "color",
          "id": "color_1",
          "label": "Color Swatch 1"
        },
        {
          "type": "color",
          "id": "color_2",
          "label": "Color Swatch 2"
        },
        {
          "type": "color",
          "id": "color_3",
          "label": "Color Swatch 3"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button Label",
          "default": "Shop Now"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        },
        {
          "type": "image_picker",
          "id": "tab_image",
          "label": "Image for this tab"
        }
      ]
    }
  ],
  "max_blocks": 4,
  "presets": [
    {
      "name": "Two Column Seasonal"
    }
  ]
}
{% endschema %}


{% stylesheet %}
<style>
.seasonal-color-tabs {
  display: flex;
  flex-wrap: wrap;
  border-radius: 15px; 
}
.seasonal-color-tabs__left img {
  width: 100%;
  height: auto;
  display: none;
  border-radius: 8px;
  transition: opacity 0.6s ease-in-out;
}

.seasonal-color-tabs .swatch-tab-button:last-child hr {
  display: none;
}

.seasonal-color-tabs .swatch-name {
  color: #000;
  font-family: "Poppins Regular";
  font-size: 26px;
  font-style: normal;
  font-weight: 400;
  line-height: 20px; /* 100% */
  letter-spacing: normal;
}
  
.seasonal-color-tabs__right {
    flex-wrap: wrap;
    align-items: center;
    align-content: center;
    justify-content: center;
}
  
.seasonal-color-tabs__left img.active {
  display: block;
}
  
.swatch-tab-button {
  width: 95%;
  height: 90px;
  cursor: pointer;
  padding: 1.2rem;
  margin-bottom: 1rem;
  background: #fff;
}

.seasonal-color-tabs .divider {
  height: 0.5px;
  display: block;
  background-color: #d7d7d7;
  margin: 5px auto;
  width: 92%;
}

.seasonal-color-tabs .divider:last-child {
  display: none;
}
  
.color-swatches {
  display: flex;
  width: 200px;
  transition: all 0.5s;
  gap: 0.5rem;
  margin: 0.5rem 0;
}
  
.swatch-tab-button:hover .color-swatches {
  padding-left: 100px;
}
  
.color-dot {
  width: 20px;
  display: block !important;
  margin: 0 5px;
  height: 20px;
  border-radius: 50%;
}
@media(max-width: 1920px) {
  .seasonal-color-tabs .swatch-name {
    font-size: 20px;
  }
  .color-dot {
    width: 11px !important;
    height: 11px  !important;
  }
}
@media(max-width: 1400px) {
  .buy-button-plain {
    width: 150px !important;
  }
  .color-swatches {
    width: 140px;
  }
}
@media(max-width: 1024px) {
  .seasonal-color-tabs .no-wrap-mobile {
    width: 100%;
    display: flex !important;
    flex-wrap: nowrap;
  }
  .swatch-tab-button:hover .color-swatches {
    padding-left: 0;
  }
  
  .seasonal-color-tabs .swatch-name {
    font-size: 17px;
    text-align: left;
    width: 85%;
  }
  .seasonal-color-tabs .color-swatches {
    width: 30% !important;
  }
  .seasonal-color-tabs .swatch-tab-button {
    width: 100%;
    height: 105px;
    padding: 15px 25px;
  }
  .seasonal-color-tabs .buy-button-plain {
    width: 100% !important;
    margin-top: 15px;
    font-size: 12px !important;
    min-height: 34px !important;
  }
}
</style>
{% endstylesheet %}
<div class="p-20" style="background-color: {{ section.settings.background_color }};">
  <div class="main-container center">
    <h2 class="w-100 m-0">{{ section.settings.section_title }}</h2>
    <p class="w-100 m-0">{{ section.settings.section_description }}</p>
    <div class="seasonal-color-tabs d-flex mt-6">
      <div class="seasonal-color-tabs__left w-50" style="background-color: {{ section.settings.left_bg }};">
        {% for block in section.blocks %}
          {% if block.settings.tab_image != blank %}
            <img
              src="{{ block.settings.tab_image | image_url }}"
              alt="{{ block.settings.swatch_name }}"
              class="tab-image{% if forloop.first %} active{% endif %}"
              data-tab-index="{{ forloop.index0 }}">
          {% endif %}
        {% endfor %}
      </div>
    
      <div class="seasonal-color-tabs__right d-flex w-50" style="background-color: {{ section.settings.right_bg }};">
        {% for block in section.blocks %}
          <div
            class="d-flex justify-between align-items-center swatch-tab-button{% if forloop.first %} active{% endif %}"
            data-tab-index="{{ forloop.index0 }}">
            <div class="w-70 d-flex no-wrap-mobile justify-between">
              <div class="swatch-name">{{ block.settings.swatch_name }}</div>
              <div class="color-swatches">
                <div class="color-dot" style="background-color: {{ block.settings.color_1 }}"></div>
                <div class="color-dot" style="background-color: {{ block.settings.color_2 }}"></div>
                <div class="color-dot" style="background-color: {{ block.settings.color_3 }}"></div>
              </div>
            </div>
            <a href="{{ block.settings.button_link }}" class="buy-button-plain">
              {{ block.settings.button_label }}
            </a>
          </div>
          <div class="w-100 divider"></div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const buttons = document.querySelectorAll('.swatch-tab-button');
    const images = document.querySelectorAll('.tab-image');

    buttons.forEach(btn => {
      btn.addEventListener('mouseenter', activateTab);
      btn.addEventListener('click', activateTab);
    });

    function activateTab(e) {
      const index = this.dataset.tabIndex;
      buttons.forEach(btn => btn.classList.remove('active'));
      this.classList.add('active');

      images.forEach(img => img.classList.remove('active'));
      const targetImage = document.querySelector(`.tab-image[data-tab-index="${index}"]`);
      if (targetImage) targetImage.classList.add('active');
    }
  });
</script>
