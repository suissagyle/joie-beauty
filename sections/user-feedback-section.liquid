{% schema %}
{
  "name": "User Feedback Slider",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Over 2000+ user feedbacks"
    },
    {
      "type": "textarea",
      "id": "caption",
      "label": "Caption",
      "default": "Backed by expertise from top color analysis studios and the minds behind leading skin tone analysis programs for reliable, expert-driven results"
    },
    {
      "type": "range",
      "id": "animation_speed",
      "label": "Animation Speed (seconds)",
      "min": 5,
      "max": 190,
      "step": 5,
      "default": 190
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review Group 1",
      "settings": [
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "User Avatar"
        },
        {
          "type": "range",
          "id": "star_rating",
          "label": "Star Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        },
        {
          "type": "textarea",
          "id": "review_message",
          "label": "Review Message"
        },
        {
          "type": "text",
          "id": "user_name",
          "label": "User Name"
        }
      ]
    },
    {
      "type": "review2",
      "name": "Review Group 2",
      "settings": [
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "User Avatar"
        },
        {
          "type": "range",
          "id": "star_rating",
          "label": "Star Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        },
        {
          "type": "textarea",
          "id": "review_message",
          "label": "Review Message"
        },
        {
          "type": "text",
          "id": "user_name",
          "label": "User Name"
        }
      ]
    },
    {
      "type": "review3",
      "name": "Review Group 3",
      "settings": [
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "User Avatar"
        },
        {
          "type": "range",
          "id": "star_rating",
          "label": "Star Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        },
        {
          "type": "textarea",
          "id": "review_message",
          "label": "Review Message"
        },
        {
          "type": "text",
          "id": "user_name",
          "label": "User Name"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "User Feedback Slider",
      "category": "Testimonials"
    }
  ]
}
{% endschema %}


<style>
  .feedback-section {
    padding: 40px 0;
  }
  .feedback-container {
    max-width: 1600px;
    margin: 0 auto;
    align-items: center;
  }
  .feedback-right {
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .feedback-marquee {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .marquee-row {
    display: flex;
    gap: 20px;
  }
  .review {
    display: flex;
    align-items: center;
    gap: 5px;
    text-align: center;
    flex-wrap: wrap;
    margin: 10px;
    width: 280px;
    height: 151px;
    background: white;
    padding: 15px;
    border-radius: 10px;
  }
  .review p {
    color: #000;
    text-align: center;
    font-size: 12px;
    font-style: normal;
    font-weight: 500;
    width: 236px;
    line-height: 150%;
    white-space: break-spaces;
    letter-spacing: 0.25px;
  }
  .stars {
    width: 70px;
  }
  .avatar {
    width: 35px;
    height: 35px;
    display: block;
    margin: 0 auto;
    object-fit: cover;
    border-radius: 50%;
  }
  .hidden {
    opacity: 0;
  }
  .Marquees {
    position: relative;
	overflow-x: hidden;
  }
  .Marquee {
    display: flex;
    align-items: center;
    position: relative;
    justify-content: center;
    width: 100vw;
    height: 20%;
  }
  .marquee{
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;
    height: 11vh;
    width: 12.5vw;
  	/*line 43 is very important. since we have 16 items, width of the Marquee which is 200vw must be devided between them. which turns out to be 12.5vw*/
    margin: 10px;
    border-radius: 15px;
  }
  .marquee:hover{
    background: #1d1d1d;
  }
  .icon {
  	color: #cccccc;
    transform: scale( 1.5 );
  }
  .FirstRow, .ThirdRow {
    animation: Scroll 100s linear infinite;
  }
  .SecondRow{
    animation: Scroll 100s linear infinite;
    animation-direction: reverse;
  }
  
  @keyframes Scroll {
      0% {transform: translateX(-20vw);
          -webkit-transform: translateX(-20vw); }
100% {transform: translateX(20vw);
            -webkit-transform: translateX(20vw);}
  }

  /* Blurring White Overlay */
  .marquee-overlay {
    position: absolute;
    z-index: 5;
    width: 100px;
    height: 100%;
    z-index: 2;
    pointer-events: none;
  }
  
  .feedback-section .overlay-bottom {
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    display: block !important;
    transform: rotate(180deg);
  }

  .feedback-section .overlay-bottom2 {
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    display: block !important;
    transform: rotate(180deg);
  }

  .SecondRow {
    opacity: 0.75;
  }

  .ThirdRow {
    opacity: 0.50;
  }

  @media(max-width: 1024px) {
    .feedback-container {
      padding: 0px;
    }
    .feedback-left {
      padding: 0 30px;
    }
    .Marquee {
      height: 18vh;
    }
    .feedback-section .overlay-left {
      left: 0vw;
    }
    .feedback-section .overlay-right {
      right: 0vw;
    }
  }

   @media(max-width: 768px) {
     .Marquee {
        height: 23vh;
      }
   }
  
</style>

<div class="feedback-section color-{{ section.settings.color_scheme }}">
  <div class="feedback-container d-flex p-20">
    <div class="feedback-left w-40 p-30">
      <h2>{{ section.settings.title }}</h2>
      <p>{{ section.settings.caption }}</p>
    </div>
    <div class="feedback-right w-60">
      <div class="Marquees">

        <!-- First Marquee Row -->
        <div class="Marquee FirstRow" style="animation-duration: {{ section.settings.animation_speed }}s;">
          {% for i in (1..3) %}
            <div class="marquee-row">
              {% for block in section.blocks %}
                {% if block.type == 'review' %}
                  <div class="review">
                    {% if block.settings.avatar %}
                      <img class="avatar" src="{{ block.settings.avatar | img_url: '50x50' }}" alt="{{ block.settings.user_name }}">
                    {% endif %}
                    <div class="w-100">
                      <span class="stars">
                        {% for j in (1..block.settings.star_rating) %}
                          ★
                        {% endfor %}
                      </span>
                      <p class="m-0">{{ block.settings.review_message }}</p>
                      <p class="m-0">{{ block.settings.user_name }}</p>
                    </div>
                  </div>
                {% endif %}
              {% endfor %}
            </div>
          {% endfor %}
        </div>

        <!-- Second Marquee Row -->
        <div class="Marquee SecondRow" style="animation-duration: {{ section.settings.animation_speed }}s;">
          {% for i in (1..3) %}
            <div class="marquee-row">
              {% for block in section.blocks %}
                {% if block.type == 'review2' %}
                  <div class="review">
                    {% if block.settings.avatar %}
                      <img class="avatar" src="{{ block.settings.avatar | img_url: '50x50' }}" alt="{{ block.settings.user_name }}">
                    {% endif %}
                    <div class="w-100">
                      <span class="stars">
                        {% for j in (1..block.settings.star_rating) %}
                          ★
                        {% endfor %}
                      </span>
                      <p class="m-0">{{ block.settings.review_message }}</p>
                      <p class="m-0">{{ block.settings.user_name }}</p>
                    </div>
                  </div>
                {% endif %}
              {% endfor %}
            </div>
          {% endfor %}
        </div>

        <!-- Third Marquee Row -->
        <div class="Marquee ThirdRow" style="animation-duration: {{ section.settings.animation_speed }}s;">
          {% for i in (1..3) %}
            <div class="marquee-row">
              {% for block in section.blocks %}
                {% if block.type == 'review3' %}
                  <div class="review">
                    {% if block.settings.avatar %}
                      <img class="avatar" src="{{ block.settings.avatar | img_url: '50x50' }}" alt="{{ block.settings.user_name }}">
                    {% endif %}
                    <div class="w-100">
                      <span class="stars">
                        {% for j in (1..block.settings.star_rating) %}
                          ★
                        {% endfor %}
                      </span>
                      <p class="m-0">{{ block.settings.review_message }}</p>
                      <p class="m-0">{{ block.settings.user_name }}</p>
                    </div>
                  </div>
                {% endif %}
              {% endfor %}
            </div>
          {% endfor %}
        </div>
       
      </div>
    </div>
  </div>
</div>
